# 基于Socket，CV2的远程控制

### 文件结构

- 服务端：server.py
- 服务端启动程序：server_start.py
- 客户端：client.py
- 客户端启动程序：client_start.py

### 系统工作流程图

![流程图](D:\MyFile\project\PKU-2ndSemester\ComputerNetwork\project\流程图.png)

### 程序设计

#### server.py

##### socket_service()：

​	创建套接字，监听socket通信请求，可以挂起的最大连接数量为5。
​    Args:
​        host:本机ip地址
​        port:绑定端口号

##### deal_data(conn,addr)：

​    处理客户端连接，打印并返回连接信息
​    Args:
​        conn:客户端连接
​        addr:客户端地址

##### get_msg(conn, length):

​    接收客户端消息
​    Args:
​        conn:客户端连接
​        addr:消息字节数
​    Returns:接收到客户端指定长度的消息

##### recv_msg(conn, msg_header):

​    接收消息主体部分图像
​    Args:
​        conn:客户端连接
​        msg_header:json解析后的消息头
​    Returns:接收到的图像数据

##### OnMouseMove(event, x, y, flags, param):

​	鼠标移动时，给客户端发送鼠标位置信息
​    Args:
​        event:鼠标事件
​        x:鼠标x轴坐标
​        y:鼠标y轴坐标
​        flags:按键flag。
​            1:cv2.EVENT_FLAG_LBUTTON
​            2:cv2.EVENT_FLAG_RBUTTON,
​            4:cv2.EVENT_FLAG_MBUTTON,
​            8:cv2.EVENT_FLAG_CTRLKEY,
​            16:cv2.EVENT_FLAG_SHIFTKEY,
​            32:cv2.EVENT_FLAG_ALTKEY,
​        param:默认参数

